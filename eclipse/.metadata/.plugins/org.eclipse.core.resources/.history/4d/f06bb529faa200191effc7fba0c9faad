package com.laz.tirphycraft.world.gen.generators.froz;

import java.util.Random;

import com.laz.tirphycraft.init.BlockInit;

import net.minecraft.block.Block;
import net.minecraft.block.state.IBlockState;
import net.minecraft.init.Blocks;
import net.minecraft.util.math.BlockPos;
import net.minecraft.util.math.MathHelper;
import net.minecraft.world.World;
import net.minecraft.world.gen.feature.WorldGenerator;

public class WorldGenGiantPick extends WorldGenerator {
	private final Block ICE = Blocks.ICE;

	public boolean generate(World worldIn, Random rand, BlockPos position) {
		System.out.println(position);
		if (worldIn.getBlockState(position.down()) != Blocks.ICE.getDefaultState() || position.getY() > 80)
			return false;

		int size = rand.nextInt(60) + 30;
		setPick(worldIn, rand, position, size);

		return true;
	}

	public void setPick(World worldIn, Random rand, BlockPos position, int size) {
		for (int i = position.getY() + size; i > position.getY() - 3; i--) {
			worldIn.setBlockState(new BlockPos(position.getX(), i, position.getZ()), ICE.getDefaultState());
		}

		if (size > 5) {
			size = (int) (size * 0.333 + (rand.nextInt(6) - 3));
			setPick(worldIn, rand, position.add(0, 0, 1), size);
			size = (int) (size * 0.333 + (rand.nextInt(6) - 3));
			setPick(worldIn, rand, position.add(0, 0, -1), size);
			size = (int) (size * 0.333 + (rand.nextInt(6) - 3));
			setPick(worldIn, rand, position.add(1, 0, 0), size);
			size = (int) (size * 0.333 + (rand.nextInt(6) - 3));
			setPick(worldIn, rand, position.add(-1, 0, 0), size);
		}
	}
}
